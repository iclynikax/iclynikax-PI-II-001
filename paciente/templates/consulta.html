{% extends "base.html" %}
{% load static %}
<!doctype html>
<html lang="pt-BR">


{% block 'head' %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.8/inputmask.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">


{% endblock 'head' %}

{% block 'body' %}

    <main id="main" class="main">
  
        <div class="row">

            <div class="pagetitle">
                <h1>Consulta Selecionada</h1>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'url_home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'url_pcnts_cnsltas' %}">Cadastro</a></li>
                    <li class="breadcrumb-item active">Consulta</li>
                </ol>
            </div>


            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-2"><img src="{{perfil.Foto.url}}" class="rounded-circle" style="height: auto; max-width: 255px;" alt="Foto do Cliente"></div>
                    <div class="col-md">
                        <p class="p-bold"><a><b>.Cliente: </b>{{consulta.paciente.first_name}} {{consulta.paciente.last_name}}</a>
                        <p><b>Endereço: </b>{{ perfil.Endereco }} - {{ perfil.Cidade }}/{{ perfil.UF }}</p>
                        <p title="{{dado_medico.descricao}}"><b>Médico:</b> {{dado_medico.nome}} - {{dado_medico.descricao}}</p>
                        <p><b>Data da Consulta: </b>{{consulta.data_aberta.data}}</p>
                    </div>
                </div>

                <hr>
                <br>
                <div class="row">
                    <div class="col-md">
                        <p><i class="color-dark bi bi-check-circle-fill"></i> Consulta Agendada</p>
                    </div>
                    <div class="col-md">
                        <p><i class="{% if consulta.status == 'F' or consulta.status == 'L' %}color-dark{% endif %} 
                                        bi bi-check-circle-fill">
                            </i> Consulta Realizada
                        </p>
                    </div>
                    <div class="col-md">
                        <p><i class="{% if consulta.status == 'L' %}color-dark{% endif %} bi bi-check-circle-fill"></i> Consulta Avaliada</p>
                    </div>
                </div>
                <hr> 
                <h3 class="p-bold">Detalhes da consulta</h3>
                <div class="row mb-12">
                   
                   
                   
                    <div class="col-md-2">
                        <img src="{{pet_Consulta.Pet_Foto.url}}" class="foto-perfil-card-lg" style="height: auto; width: 200px;" title="Foto do Pet" alt="Foto do Pet">
                    </div>
                   
                    <div class="col-sm-2">
                        <div data-mdb-input-init class="form-outline">
                            <label for="">Espécie:</label>
                                <select name="get_Pet_Especie" disabled class="form-control shadow-main-color form-select" >
                                    {% for Pet_Slct in Lst_Pets %}
                                        <option {% if Pet_Slct.id == pet_Consulta.Pet_id %} selected {% endif %} value="{{ Pet_Slct.id }}">{{ Pet_Slct.Pet }}</option>
                                    {% endfor %}
                                </select><br>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div data-mdb-input-init class="form-outline">
                            <label for="">Raça:</label>
                            <input type="text" class="form-control shadow-main-color" disabled name="get_Pet_Raca" value="{{pet_Consulta.Pet_Raca}}">
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div data-mdb-input-init class="form-outline">
                            <label for="">Nome:</label>
                            <input type="text" class="form-control shadow-main-color" disabled name="get_Pet_Nome" value="{{pet_Consulta.Pet_Nome}}">
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div data-mdb-input-init class="form-outline">
                            <label for="">Sexo:</label>
                                <select  name="get_Pet_Sexo" id="id_Pet_Sexo" disabled class="form-control shadow-main-color form-select" >
                                    {% for valor, nome in Lst_Pts_Sxo %}
                                        <option {% if valor == pet_Consulta.Pet_Sexo %} selected {% endif %} value="{{ valor }}">{{ nome }}</option>
                                    {% endfor %}
                                </select>
                                <br>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div data-mdb-input-init class="form-outline">
                            <label for="">dt Nascimento:</label>
                            <input type="text" class="form-control shadow-main-color" disabled maxlength="10" placeholder="DD/MM/YYYY" required name="get_Pet_dtNscmnto" value="{{pet_Consulta.dt_Nscmnto | date:"d/m/Y"}}">
                            <p id="mensagem"></p>
                        </div>
                    </div>
                </div>
                
                <hr>
                <h3 class="p-bold">Documentos</h3>
                <br>

                {% for documento in documentos %}
                    <a href="{{documento.documento.url}}" target="_OpenDocumento" class="link documentos"><i class="bi bi-file-arrow-down"></i> {{documento.titulo}} - {{documento.consulta.data_aberta.data.year}}</a>
                    <br><br><br>
                {% endfor %}
   
                <br>
                <hr>
                <h3 class="p-bold">Notificações/Aprovações</h3>
                <div class="list-minhas-consultas" >
                    <table class="table table-success table-striped">
                        <thead>
                            <tr>
                                <th scope="col">Titulo</th>
                                <th scope="col">Data de Envio</th>
                                <th scope="col">Resposta</th>
                                <th scope="col">Ação</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for ntficcao in ntficcoes %}
                                <tr>
                                    <td><a href="{% url 'url_atrzacao' ntficcao.id  consulta.id %}">{{ntficcao.titulo}}</a></td>
                                    <td><a href="{% url 'url_atrzacao' ntficcao.id  consulta.id %}">{{ntficcao.dt_envio|date:"d-m-Y"}}</a></td>
                                    <td><a href="{% url 'url_atrzacao' ntficcao.id  consulta.id %}">{{ntficcao.get_rspsta_display}}</a></td>
                                    <td><a title="Envia Notificação para aprovação" href="{% url 'url_atrzacao' ntficcao.id  consulta.id %}">Enviar Notificação</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% if lAddNtfccs > 0  %}
                    <div class="row">
                        <div class="col-md">
                            <td>
                                <input type="submit" style="text-align:center; cursor:pointer; WIDTH:100%" title="Não é possível adicionar uma nova notificação, pois há notificação com resposta indefinida" disabled value="Não é possível adicionar uma nova notificação, pois há notificação com resposta indefinida. " class="btn btn-success btn-dark-color">
                            </td>
                        </div>
                    </div> 
                {% else %}
                    <form action="{% url 'url_add_atrzacao' consulta.id  %}" method="POST">{% csrf_token %}
                        <div class="row">
                            <div class="col-md">
                                <td>
                                    <input type="submit"  style="text-align:center; cursor:pointer; WIDTH:100%" title="Adiciona uma nova notificação para aprovação do cliente." value="Adiciona uma nova notificação para a consulta acima, para aprovação do cliente. " class="btn btn-success btn-dark-color">
                                </td>
                            </div>
                        </div> 
                    </form>
                {% endif %}
            </div>
        </div>
        
    </main>

    <!--Ativa as opções do menu principal esquerdo -->
<script language="JavaScript">
    <!--
        document.getElementById('components-nav').className ='nav-content collapse show';
        document.getElementById('sidebar-nav-Atendimento-consultas').className ='active';
    //-->
</script>


{% endblock 'body' %}